(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{MpXs:function(e,t,n){"use strict";n.r(t),n.d(t,"SupportedPeopleRecommendModule",function(){return ce});var i=n("SVse"),a=n("6No5"),o=n("s7LF"),c=n("Vaw3"),r=n("spgP"),s=n("AytR"),d=n("978R"),l=n("iInd"),b=n("mrSG"),g=n("OC8m"),u=n("klZy"),p=n("iELJ"),h=n("y84U"),f=n("nYR2"),m=n("pmY2"),D=n("H+bZ"),v=n("8Y7J");let U=(()=>{class e{constructor(){this.getAll=()=>D.a.get(`${D.a.url.supportedPeopleRecommends}`),this.countAll=()=>D.a.get(`${D.a.url.supportedPeopleRecommends}/count`),this.getFromAtoB=(e,t)=>D.a.get(`${D.a.url.supportedPeopleRecommends}/page/${e}/size/${t}`),this.checkStatus=(e,t)=>D.a.get(`${D.a.url.supportedPeopleRecommends}/check/${e}/collaborator/${t}`),this.unHandle=e=>D.a.post(`${D.a.url.supportedPeopleRecommends}/un_handle/${e}`),this.save=e=>D.a.post(`${D.a.url.supportedPeopleRecommends}`,e),this.createProject=e=>D.a.post(`${D.a.url.supportedPeopleRecommends}/create_project`,e),this.saveDraft1=e=>D.a.post(`${D.a.url.supportedPeopleRecommends}/save_draft_step1`,e),this.saveDraft2=e=>D.a.post(`${D.a.url.supportedPeopleRecommends}/save_draft_step2`,e),this.delete=e=>D.a.delete(`${D.a.url.supportedPeopleRecommends}/${e}`)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=v.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=n("Dxy4"),V=n("Tj54"),y=n("Q2Ze"),k=n("e6WT"),M=n("TN/R"),C=n("pMoy"),I=n("ZTz/"),j=n("40+f"),x=n("UhP/");let O=(()=>{class e{constructor(){this.files=new v.o,this.background="#f5fcff",this.opacity="1"}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.background="#9ecbec",this.opacity="0.8"}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.background="#f5fcff",this.opacity="1"}ondrop(e){e.preventDefault(),e.stopPropagation(),this.background="#f5fcff",this.opacity="1";let t=e.dataTransfer.files;t.length>0&&this.files.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=v.Kb({type:e,selectors:[["","imageDragDrop",""]],hostVars:4,hostBindings:function(e,t){1&e&&v.cc("dragover",function(e){return t.onDragOver(e)})("dragleave",function(e){return t.onDragLeave(e)})("drop",function(e){return t.ondrop(e)}),2&e&&v.yc("background-color",t.background)("opacity",t.opacity)},outputs:{files:"files"}}),e})(),_=(()=>{class e{constructor(){this.files=new v.o,this.background="#f5fcff",this.opacity="1"}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.background="#9ecbec",this.opacity="0.8"}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.background="#f5fcff",this.opacity="1"}ondrop(e){e.preventDefault(),e.stopPropagation(),this.background="#f5fcff",this.opacity="1";let t=e.dataTransfer.files;t.length>0&&this.files.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=v.Kb({type:e,selectors:[["","videoDragDrop",""]],hostVars:4,hostBindings:function(e,t){1&e&&v.cc("dragover",function(e){return t.onDragOver(e)})("dragleave",function(e){return t.onDragLeave(e)})("drop",function(e){return t.ondrop(e)}),2&e&&v.yc("background-color",t.background)("opacity",t.opacity)},outputs:{files:"files"}}),e})();function S(e,t){if(1&e&&(v.Vb(0,"mat-option",26),v.Vb(1,"a"),v.Dc(2),v.Ub(),v.Ub()),2&e){const e=t.$implicit;v.lc("value",e.prt_ID),v.Db(2),v.Ec(e.projectTypeName)}}function w(e,t){if(1&e&&(v.Vb(0,"mat-option",26),v.Vb(1,"a"),v.Dc(2),v.Ub(),v.Ub()),2&e){const e=t.$implicit;v.lc("value",e.cti_ID),v.Db(2),v.Ec(e.name)}}function $(e,t){if(1&e){const e=v.Wb();v.Vb(0,"div",30),v.cc("click",function(){return v.uc(e),v.sc(2).click()})("files",function(t){v.uc(e);const n=v.gc().$implicit;return v.gc().uploadImages(t,n)}),v.Vb(1,"input",31,32),v.cc("change",function(t){v.uc(e);const n=v.gc().$implicit;return v.gc().uploadImages(t.target.files,n)}),v.Ub(),v.Ub()}}function R(e,t){1&e&&v.Qb(0,"div",33)}function N(e,t){1&e&&v.Qb(0,"div",34)}function T(e,t){if(1&e&&v.Qb(0,"img",37),2&e){const e=v.gc(2).$implicit,t=v.gc();v.lc("src",t.imageUrls[e],v.wc)}}function L(e,t){if(1&e){const e=v.Wb();v.Vb(0,"button",38),v.cc("click",function(){v.uc(e);const t=v.gc(2).index;return v.gc().deleteAttachment(t)}),v.Qb(1,"i",39),v.Ub()}}function B(e,t){if(1&e&&(v.Vb(0,"div",34),v.Bc(1,T,1,1,"img",35),v.Bc(2,L,2,0,"button",36),v.Ub()),2&e){const e=v.gc().$implicit,t=v.gc();v.Db(1),v.lc("ngIf",t.imageUrls[e]),v.Db(1),v.lc("ngIf",t.imageUrls[e])}}function A(e,t){if(1&e&&(v.Vb(0,"mat-grid-tile"),v.Bc(1,$,3,0,"div",27),v.Bc(2,R,1,0,"div",28),v.Bc(3,N,1,0,"div",29),v.Bc(4,B,3,2,"div",29),v.Ub()),2&e){const e=t.$implicit,n=v.gc();v.Db(1),v.lc("ngIf",!n.imageUrls[e]&&!n.isUpLoadingImage),v.Db(1),v.lc("ngIf",!n.imageUrls[e]&&n.isUpLoadingImage&&e==n.upLoadingIndex),v.Db(1),v.lc("ngIf",!n.imageUrls[e]&&n.isUpLoadingImage&&e!=n.upLoadingIndex),v.Db(1),v.lc("ngIf",n.imageUrls[e])}}function H(e,t){if(1&e){const e=v.Wb();v.Vb(0,"div",40),v.cc("click",function(){return v.uc(e),v.sc(2).click()})("files",function(t){return v.uc(e),v.gc().uploadVideo(t)}),v.Vb(1,"input",41,42),v.cc("change",function(t){return v.uc(e),v.gc().uploadVideo(t.target.files)}),v.Ub(),v.Ub()}}function F(e,t){1&e&&v.Qb(0,"div",43)}function W(e,t){if(1&e&&(v.Vb(0,"video",46),v.Qb(1,"source",47),v.Ub()),2&e){const e=v.gc(2);v.lc("src",e.videoUrl,v.wc)}}function Q(e,t){if(1&e){const e=v.Wb();v.Vb(0,"button",48),v.cc("click",function(){return v.uc(e),v.gc(2).deleteVideo()}),v.Qb(1,"i",39),v.Ub()}}function q(e,t){if(1&e&&(v.Vb(0,"div",43),v.Bc(1,W,2,1,"video",44),v.Bc(2,Q,2,0,"button",45),v.Ub()),2&e){const e=v.gc();v.Db(1),v.lc("ngIf",e.videoUrl),v.Db(1),v.lc("ngIf",e.videoUrl)}}const z=function(){return[0,1,2,3,4,5]};let E=(()=>{class e{constructor(e,t,n,i,a,o,c){this.notificationService=e,this.supportedPeopleRecommendService=t,this.cityService=n,this.projectTypeService=i,this.dialogRef=a,this.storage=o,this.data=c,this.imageUrls=[],a.disableClose=!0}ngOnInit(){this.getProjectType(),this.getCity(),this.videoUrl=this.data.videoUrl,this.canDisburseWhenOverdue=null!=this.data.projectType?this.data.projectType.canDisburseWhenOverdue:this.data.canDisburseWhenOverdue,this.initImageArray()}initImageArray(){this.imageUrls=this.data.images;let e=this.imageUrls.length;for(let t=0;t<6-e;t++)this.imageUrls.push("")}uploadImages(e,t){if(this.isUpLoadingImage=!0,this.upLoadingIndex=t,e.length>1)return this.notificationService.warn("Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn 1 \u1ea3nh"),this.isUpLoadingImage=!1,void(this.upLoadingIndex=null);for(let i=0;i<e.length;i++){var n=Date.now();const a=e[i],o=this.storage.ref(`chari/${n}`);this.storage.upload(`chari/${n}`,a).snapshotChanges().pipe(Object(f.a)(()=>{this.downloadURL=o.getDownloadURL(),this.downloadURL.subscribe(e=>{e&&(this.imageUrls[t]=e,this.isUpLoadingImage=!1,this.upLoadingIndex=null)})})).subscribe(e=>{e&&console.log(e)})}}uploadVideo(e){if(this.isUploadingVideo=!0,e.length>1)return this.notificationService.warn("Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn 1 video"),void(this.isUploadingVideo=!1);for(let n=0;n<e.length;n++){var t=Date.now();const i=e[n],a=this.storage.ref(`chari_video/${t}`);this.storage.upload(`chari_video/${t}`,i).snapshotChanges().pipe(Object(f.a)(()=>{this.downloadURL=a.getDownloadURL(),this.downloadURL.subscribe(e=>{e&&(this.videoUrl=e,this.isUploadingVideo=!1)})})).subscribe(e=>{e&&console.log(e)})}}deleteAttachment(e){this.imageUrls[e]=""}deleteVideo(){this.videoUrl=null}getCity(){return Object(b.b)(this,void 0,void 0,function*(){this.Cities=yield(yield this.cityService.getCities()).data})}getProjectType(){return Object(b.b)(this,void 0,void 0,function*(){this.ProjectTypes=yield(yield this.projectTypeService.getProjectTypes()).data})}changeState(){this.canDisburseWhenOverdue=1!=this.canDisburseWhenOverdue}filterProjectType(){return this.ProjectTypes.filter(e=>e.canDisburseWhenOverdue==this.canDisburseWhenOverdue)}saveImageAndVideo(){for(this.data.videoUrl=this.videoUrl;this.imageUrls.indexOf("",0)>-1;){const e=this.imageUrls.indexOf("",0);e>-1&&this.imageUrls.splice(e,1)}this.data.imageUrl=this.imageUrls[0],this.data.images=this.imageUrls}save(){this.saveImageAndVideo(),this.dialogRef.close(this.data)}finish(){this.saveImageAndVideo(),""!=this.data.projectName&&""!=this.data.briefDescription&&""!=this.data.description&&null!=this.data.cti_ID&&""!=this.data.startDate&&""!=this.data.endDate&&""!=this.data.targetMoney&&null!=this.data.prt_ID?this.data.description.length<300?this.notificationService.warn("H\xe3y \u0111i\u1ec1n n\u1ed9i dung d\u1ef1 \xe1n t\u1ed1i thi\u1ec3u 100 t\u1eeb"):null!=this.data.imageUrl?confirm("D\u1ef1 \xe1n m\u1edbi s\u1ebd \u0111\u01b0\u1ee3c t\u1ea1o v\xe0 \u0111\u01b0a v\xe0o tr\u1ea1ng th\xe1i \u0111ang ho\u1ea1t \u0111\u1ed9ng")&&this.dialogRef.close(this.data):this.notificationService.warn("H\xe3y t\u1ea3i l\xean \xedt nh\u1ea5t 1 h\xecnh \u1ea3nh cho tin t\u1ee9c"):this.notificationService.warn("H\xe3y \u0111i\u1ec1n v\xe0 ch\u1ecdn \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin")}saveDraft(){return Object(b.b)(this,void 0,void 0,function*(){this.saveImageAndVideo();const e=yield(yield this.supportedPeopleRecommendService.saveDraft2(this.data)).data;this.notificationService.warn(e.message)})}back(){this.dialogRef.close("back")}unHandle(){confirm("B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n h\u1ee7y x\u1eed l\xfd ho\xe0n c\u1ea3nh n\xe0y")&&(this.supportedPeopleRecommendService.unHandle(this.data.sprID),this.dialogRef.close("delete"))}}return e.\u0275fac=function(t){return new(t||e)(v.Pb(g.a),v.Pb(U),v.Pb(m.a),v.Pb(h.a),v.Pb(p.g),v.Pb(c.a),v.Pb(p.a))},e.\u0275cmp=v.Jb({type:e,selectors:[["app-dialog-project"]],decls:65,vars:36,consts:[["mat-icon-button","","mat-dialog-close","",1,"close-button"],["color","warn",1,"close-icon"],["mat-icon-button","",1,"back-button",3,"click"],["mat-dialog-title",""],["appearance","outline"],["name","project_name","matInput","","required","","cdkFocusInitial","",3,"ngModel","ngModelChange"],["name","brief_description","matInput","","required","",3,"ngModel","ngModelChange"],["matInput","","name","description","required","",3,"ngModel","ngModelChange"],["name","target_money","matInput","","required","",3,"ngModel","ngModelChange"],["matInput","","name","startDate","required","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["pickerStartDate",""],["matInput","","name","endDate","required","",3,"matDatepicker","ngModel","ngModelChange"],["pickerEndDate",""],["name","canDisburseWhenOverdue",3,"ngModel","click","ngModelChange"],["id","project_type_id","name","project_type_id","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","city_id","name","city_id","required","",1,"form-control",3,"ngModel","ngModelChange"],["cols","3"],[4,"ngFor","ngForOf"],["class","video-container","videoDragDrop","",3,"click","files",4,"ngIf"],["class","video-container-loading",4,"ngIf"],["align","end"],["mat-button","",1,"btn","btn-danger",3,"click"],["mat-button","",1,"btn","btn-primary",3,"click"],["mat-button","",1,"btn","btn-success",3,"click"],[3,"value"],["class","image-container","imageDragDrop","",3,"click","files",4,"ngIf"],["class","image-container-loading",4,"ngIf"],["class","image-container",4,"ngIf"],["imageDragDrop","",1,"image-container",3,"click","files"],["hidden","","type","file","multiple","false","accept",".jpg,.jpeg,.png",3,"change"],["imageInput",""],[1,"image-container-loading"],[1,"image-container"],["alt","",3,"src",4,"ngIf"],["type","button","class","button btn btn-danger btn-sm",3,"click",4,"ngIf"],["alt","",3,"src"],["type","button",1,"button","btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-remove"],["videoDragDrop","",1,"video-container",3,"click","files"],["hidden","","type","file","multiple","false","accept",".mp4",3,"change"],["fileInput",""],[1,"video-container-loading"],["controls","",3,"src",4,"ngIf"],["type","button","class","delete-video-button btn btn-danger btn-sm",3,"click",4,"ngIf"],["controls","",3,"src"],["src","videoUrl","type","video/mp4"],["type","button",1,"delete-video-button","btn","btn-danger","btn-sm",3,"click"]],template:function(e,t){if(1&e&&(v.Vb(0,"button",0),v.Vb(1,"mat-icon",1),v.Dc(2,"close"),v.Ub(),v.Ub(),v.Vb(3,"button",2),v.cc("click",function(){return t.back()}),v.Vb(4,"mat-icon"),v.Dc(5,"keyboard_backspace"),v.Ub(),v.Ub(),v.Vb(6,"h1",3),v.Dc(7,"X\u1eed l\xfd ho\xe0n c\u1ea3nh"),v.Ub(),v.Vb(8,"h5",3),v.Dc(9,"B\u01b0\u1edbc 2: Th\xeam th\xf4ng tin d\u1ef1 \xe1n"),v.Ub(),v.Vb(10,"mat-dialog-content"),v.Vb(11,"mat-form-field",4),v.Vb(12,"mat-label"),v.Dc(13,"T\xean D\u1ef1 \xe1n"),v.Ub(),v.Vb(14,"input",5),v.cc("ngModelChange",function(e){return t.data.projectName=e}),v.Ub(),v.Ub(),v.Vb(15,"mat-form-field",4),v.Vb(16,"mat-label"),v.Dc(17,"M\xf4 t\u1ea3 v\u1eafn t\u1eaft"),v.Ub(),v.Vb(18,"input",6),v.cc("ngModelChange",function(e){return t.data.briefDescription=e}),v.Ub(),v.Ub(),v.Vb(19,"mat-form-field",4),v.Vb(20,"mat-label"),v.Dc(21,"N\u1ed9i dung"),v.Ub(),v.Vb(22,"textarea",7),v.cc("ngModelChange",function(e){return t.data.description=e}),v.Ub(),v.Ub(),v.Vb(23,"mat-form-field",4),v.Vb(24,"mat-label"),v.Dc(25,"M\u1ee5c ti\xeau quy\xean g\xf3p"),v.Ub(),v.Vb(26,"input",8),v.cc("ngModelChange",function(e){return t.data.targetMoney=e}),v.Ub(),v.Ub(),v.Vb(27,"mat-form-field",4),v.Vb(28,"mat-label"),v.Dc(29,"Ng\xe0y b\u1eaft \u0111\u1ea7u"),v.Ub(),v.Vb(30,"input",9),v.cc("ngModelChange",function(e){return t.data.startDate=e}),v.Ub(),v.Qb(31,"mat-datepicker-toggle",10),v.Qb(32,"mat-datepicker",null,11),v.Ub(),v.Vb(34,"mat-form-field",4),v.Vb(35,"mat-label"),v.Dc(36,"Ng\xe0y k\u1ebft th\xfac"),v.Ub(),v.Vb(37,"input",12),v.cc("ngModelChange",function(e){return t.data.endDate=e}),v.Ub(),v.Qb(38,"mat-datepicker-toggle",10),v.Qb(39,"mat-datepicker",null,13),v.Ub(),v.Vb(41,"mat-checkbox",14),v.cc("click",function(){return t.changeState()})("ngModelChange",function(e){return t.data.canDisburseWhenOverdue=e}),v.Dc(42,"Cho ph\xe9p gi\u1ea3i ng\xe2n khi h\u1ebft h\u1ea1n"),v.Ub(),v.Vb(43,"mat-form-field"),v.Vb(44,"mat-label"),v.Dc(45,"G\xf3i t\u1eeb thi\u1ec7n"),v.Ub(),v.Vb(46,"mat-select",15),v.cc("ngModelChange",function(e){return t.data.prt_ID=e}),v.Bc(47,S,3,2,"mat-option",16),v.Ub(),v.Ub(),v.Vb(48,"mat-form-field"),v.Vb(49,"mat-label"),v.Dc(50,"T\u1ec9nh th\xe0nh"),v.Ub(),v.Vb(51,"mat-select",17),v.cc("ngModelChange",function(e){return t.data.cti_ID=e}),v.Bc(52,w,3,2,"mat-option",16),v.Ub(),v.Ub(),v.Vb(53,"mat-grid-list",18),v.Bc(54,A,5,4,"mat-grid-tile",19),v.Ub(),v.Bc(55,H,3,0,"div",20),v.Bc(56,F,1,0,"div",21),v.Bc(57,q,3,2,"div",21),v.Ub(),v.Vb(58,"mat-dialog-actions",22),v.Vb(59,"button",23),v.cc("click",function(){return t.unHandle()}),v.Dc(60,"H\u1ee7y"),v.Ub(),v.Vb(61,"button",24),v.cc("click",function(){return t.saveDraft()}),v.Dc(62,"L\u01b0u nh\xe1p"),v.Ub(),v.Vb(63,"button",25),v.cc("click",function(){return t.finish()}),v.Dc(64,"Ho\xe0n t\u1ea5t"),v.Ub(),v.Ub()),2&e){const e=v.sc(33),n=v.sc(40);v.Db(11),v.yc("width",100,"%"),v.Db(3),v.lc("ngModel",t.data.projectName),v.Db(1),v.yc("width",100,"%"),v.Db(3),v.lc("ngModel",t.data.briefDescription),v.Db(1),v.yc("width",100,"%"),v.Db(3),v.lc("ngModel",t.data.description),v.Db(1),v.yc("width",32,"%"),v.Db(3),v.lc("ngModel",t.data.targetMoney),v.Db(1),v.yc("width",32,"%"),v.Db(3),v.lc("matDatepicker",e)("ngModel",t.data.startDate),v.Db(1),v.lc("for",e),v.Db(3),v.yc("width",32,"%"),v.Db(3),v.lc("matDatepicker",n)("ngModel",t.data.endDate),v.Db(1),v.lc("for",n),v.Db(3),v.lc("ngModel",t.data.canDisburseWhenOverdue),v.Db(2),v.yc("width",33,"%"),v.Db(3),v.lc("ngModel",t.data.prt_ID),v.Db(1),v.lc("ngForOf",t.filterProjectType()),v.Db(1),v.yc("width",33,"%"),v.Db(3),v.lc("ngModel",t.data.cti_ID),v.Db(1),v.lc("ngForOf",t.Cities),v.Db(2),v.lc("ngForOf",v.nc(35,z)),v.Db(1),v.lc("ngIf",!t.videoUrl&&!t.isUploadingVideo),v.Db(1),v.lc("ngIf",t.isUploadingVideo),v.Db(1),v.lc("ngIf",t.videoUrl)}},directives:[P.a,p.d,V.a,p.h,p.e,y.b,y.e,k.b,o.c,o.m,o.i,o.k,M.b,M.d,y.f,M.a,C.a,I.a,i.j,j.a,i.k,p.c,x.m,j.c,O,_],styles:[".image-container-loading[_ngcontent-%COMP%]{background-image:url(loading.8ce64eeb4935117736d4.gif)}.image-container[_ngcontent-%COMP%], .image-container-loading[_ngcontent-%COMP%]{position:relative;background-repeat:no-repeat;background-size:70px;background-position:50%;width:300px;height:180px;margin:5px}.image-container[_ngcontent-%COMP%]{background-image:url(upload.5ca7ecf41ef411651ece.png);border:1px dashed #1c8adb;border-radius:2px}.image-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#9ecbec!important;opacity:.8}img[_ngcontent-%COMP%]{width:300px;height:182px;left:-2px;border-radius:2px}.button[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{position:absolute;top:-2px}.button[_ngcontent-%COMP%]{right:-5px}.video-container-loading[_ngcontent-%COMP%]{background-image:url(loading.8ce64eeb4935117736d4.gif);border-radius:6px}.video-container[_ngcontent-%COMP%], .video-container-loading[_ngcontent-%COMP%]{position:relative;background-repeat:no-repeat;background-size:300px;background-position:50%;width:100%;height:400px;margin:10px auto}.video-container[_ngcontent-%COMP%]{background-image:url(upload-video.08ba7a62c53b6c43597a.png);border:2px dashed #1c8adb;border-radius:6px}.video-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#9ecbec!important;opacity:.8}video[_ngcontent-%COMP%]{position:absolute;border-radius:3px;width:100%;height:auto}.delete-video-button[_ngcontent-%COMP%]{position:absolute;right:0}.close-button[_ngcontent-%COMP%]{float:right;top:-24px;right:-24px}.back-button[_ngcontent-%COMP%]{float:left;top:-24px;left:-24px}"]}),e})(),J=(()=>{class e{constructor(e,t,n,i){this.notificationService=e,this.apiService=t,this.dialogRef=n,this.data=i,n.disableClose=!0}ngOnInit(){}saveDraft(){return Object(b.b)(this,void 0,void 0,function*(){const e=yield(yield this.apiService.saveDraft1(this.data)).data;this.notificationService.warn(e.message)})}unHandle(){confirm("B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n h\u1ee7y x\u1eed l\xfd ho\xe0n c\u1ea3nh n\xe0y")&&this.apiService.unHandle(this.data.sprID)}nextStep(){null==this.data.fullName||null==this.data.address||null==this.data.phoneNumber||null==this.data.bankName||null==this.data.bankAccount?this.notificationService.warn("H\xe3y \u0111i\u1ec1n th\xf4ng tin c\xf2n thi\u1ebfu"):(this.apiService.saveDraft1(this.data),this.dialogRef.close(this.data))}}return e.\u0275fac=function(t){return new(t||e)(v.Pb(g.a),v.Pb(U),v.Pb(p.g),v.Pb(p.a))},e.\u0275cmp=v.Jb({type:e,selectors:[["app-dialog-supported-people-recommend"]],decls:51,vars:24,consts:[["mat-icon-button","","mat-dialog-close","",1,"close-button"],["color","warn",1,"close-icon"],["mat-dialog-title",""],["disabled","","appearance","outline"],["name","referrerName","matInput","","required","",3,"ngModel","ngModelChange"],["name","referrerPhone","matInput","","required","",3,"ngModel","ngModelChange"],["matInput","","name","description","required","",3,"ngModel","ngModelChange"],["appearance","outline"],["name","fullname","matInput","","required","","cdkFocusInitial","",3,"ngModel","ngModelChange"],["name","phoneNumber","matInput","","required","",3,"ngModel","ngModelChange"],["name","address","matInput","","required","",3,"ngModel","ngModelChange"],["name","bankName","matInput","","required","",3,"ngModel","ngModelChange"],["name","bankAccount","matInput","","required","",3,"ngModel","ngModelChange"],["align","end"],["mat-button","","mat-dialog-close","",1,"btn","btn-danger",3,"click"],["mat-button","",1,"btn","btn-primary",3,"click"],["mat-button","",1,"btn","btn-success",3,"click"]],template:function(e,t){1&e&&(v.Vb(0,"button",0),v.Vb(1,"mat-icon",1),v.Dc(2,"close"),v.Ub(),v.Ub(),v.Vb(3,"h2",2),v.Dc(4,"X\u1eed l\xfd ho\xe0n c\u1ea3nh kh\xf3 kh\u0103n"),v.Ub(),v.Vb(5,"h5",2),v.Dc(6,"B\u01b0\u1edbc 1: C\u1eadp nh\u1eadt th\xf4ng tin ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng"),v.Ub(),v.Vb(7,"mat-dialog-content"),v.Vb(8,"h5"),v.Dc(9,"Th\xf4ng tin ng\u01b0\u1eddi gi\u1edbi thi\u1ec7u"),v.Ub(),v.Vb(10,"mat-form-field",3),v.Vb(11,"mat-label"),v.Dc(12,"T\xean Ng\u01b0\u1eddi gi\u1edbi thi\u1ec7u"),v.Ub(),v.Vb(13,"input",4),v.cc("ngModelChange",function(e){return t.data.referrerName=e}),v.Ub(),v.Ub(),v.Vb(14,"mat-form-field",3),v.Vb(15,"mat-label"),v.Dc(16,"S\u0110T Li\xean h\u1ec7"),v.Ub(),v.Vb(17,"input",5),v.cc("ngModelChange",function(e){return t.data.referrerPhone=e}),v.Ub(),v.Ub(),v.Vb(18,"mat-form-field",3),v.Vb(19,"mat-label"),v.Dc(20,"M\xf4 t\u1ea3 ho\xe0n c\u1ea3nh"),v.Ub(),v.Vb(21,"textarea",6),v.cc("ngModelChange",function(e){return t.data.referrerDescription=e}),v.Ub(),v.Ub(),v.Vb(22,"h5"),v.Dc(23,"Th\xf4ng tin ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng"),v.Ub(),v.Vb(24,"mat-form-field",7),v.Vb(25,"mat-label"),v.Dc(26,"T\xean \u0111\u1ea7y \u0111\u1ee7"),v.Ub(),v.Vb(27,"input",8),v.cc("ngModelChange",function(e){return t.data.fullName=e}),v.Ub(),v.Ub(),v.Vb(28,"mat-form-field",7),v.Vb(29,"mat-label"),v.Dc(30,"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"),v.Ub(),v.Vb(31,"input",9),v.cc("ngModelChange",function(e){return t.data.phoneNumber=e}),v.Ub(),v.Ub(),v.Vb(32,"mat-form-field",7),v.Vb(33,"mat-label"),v.Dc(34,"\u0110\u1ecba ch\u1ec9"),v.Ub(),v.Vb(35,"input",10),v.cc("ngModelChange",function(e){return t.data.address=e}),v.Ub(),v.Ub(),v.Vb(36,"mat-form-field",7),v.Vb(37,"mat-label"),v.Dc(38,"T\xean ng\xe2n h\xe0ng"),v.Ub(),v.Vb(39,"input",11),v.cc("ngModelChange",function(e){return t.data.bankName=e}),v.Ub(),v.Ub(),v.Vb(40,"mat-form-field",7),v.Vb(41,"mat-label"),v.Dc(42,"S\u1ed1 t\xe0i kho\u1ea3n"),v.Ub(),v.Vb(43,"input",12),v.cc("ngModelChange",function(e){return t.data.bankAccount=e}),v.Ub(),v.Ub(),v.Ub(),v.Vb(44,"mat-dialog-actions",13),v.Vb(45,"button",14),v.cc("click",function(){return t.unHandle()}),v.Dc(46,"H\u1ee7y"),v.Ub(),v.Vb(47,"button",15),v.cc("click",function(){return t.saveDraft()}),v.Dc(48,"L\u01b0u nh\xe1p"),v.Ub(),v.Vb(49,"button",16),v.cc("click",function(){return t.nextStep()}),v.Dc(50,"Ti\u1ebfp theo"),v.Ub(),v.Ub()),2&e&&(v.Db(10),v.yc("width",60,"%"),v.Db(3),v.lc("ngModel",t.data.referrerName),v.Db(1),v.yc("width",38,"%"),v.Db(3),v.lc("ngModel",t.data.referrerPhone),v.Db(1),v.yc("width",98,"%"),v.Db(3),v.lc("ngModel",t.data.referrerDescription),v.Db(3),v.yc("width",60,"%"),v.Db(3),v.lc("ngModel",t.data.fullName),v.Db(1),v.yc("width",38,"%"),v.Db(3),v.lc("ngModel",t.data.phoneNumber),v.Db(1),v.yc("width",98,"%"),v.Db(3),v.lc("ngModel",t.data.address),v.Db(1),v.yc("width",60,"%"),v.Db(3),v.lc("ngModel",t.data.bankName),v.Db(1),v.yc("width",38,"%"),v.Db(3),v.lc("ngModel",t.data.bankAccount))},directives:[P.a,p.d,V.a,p.h,p.e,y.b,y.e,k.b,o.c,o.m,o.i,o.k,p.c],styles:[".image-container-loading[_ngcontent-%COMP%]{background-image:url(loading.8ce64eeb4935117736d4.gif)}.image-container[_ngcontent-%COMP%], .image-container-loading[_ngcontent-%COMP%]{position:relative;background-repeat:no-repeat;background-size:70px;background-position:50%;width:300px;height:180px;margin:5px}.image-container[_ngcontent-%COMP%]{background-image:url(upload.5ca7ecf41ef411651ece.png);border:1px dashed #1c8adb;border-radius:2px}.image-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#9ecbec!important;opacity:.8}img[_ngcontent-%COMP%]{width:300px;height:182px;left:-2px;border-radius:2px}.button[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{position:absolute;top:-2px}.button[_ngcontent-%COMP%]{right:-5px}.video-container-loading[_ngcontent-%COMP%]{background-image:url(loading.8ce64eeb4935117736d4.gif);border-radius:6px}.video-container[_ngcontent-%COMP%], .video-container-loading[_ngcontent-%COMP%]{position:relative;background-repeat:no-repeat;background-size:300px;background-position:50%;width:100%;height:400px;margin:10px auto}.video-container[_ngcontent-%COMP%]{background-image:url(upload-video.08ba7a62c53b6c43597a.png);border:2px dashed #1c8adb;border-radius:6px}.video-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#9ecbec!important;opacity:.8}video[_ngcontent-%COMP%]{position:absolute;border-radius:3px;width:100%;height:auto}.delete-video-button[_ngcontent-%COMP%]{position:absolute;right:0}.close-button[_ngcontent-%COMP%]{float:right;top:-24px;right:-24px}.back-button[_ngcontent-%COMP%]{float:left;top:-24px;left:-24px}"]}),e})();function G(e,t){1&e&&(v.Vb(0,"span",18),v.Dc(1,"Ch\u1edd x\u1eed l\xfd"),v.Ub())}function Z(e,t){1&e&&(v.Vb(0,"span",19),v.Dc(1,"\u0110ang x\u1eed l\xfd"),v.Ub())}function X(e,t){if(1&e&&(v.Vb(0,"td"),v.Dc(1),v.Ub()),2&e){const e=v.gc().$implicit;v.Db(1),v.Ec(e.collaborator.fullName)}}function Y(e,t){1&e&&v.Qb(0,"td")}function K(e,t){if(1&e){const e=v.Wb();v.Vb(0,"td",20),v.Vb(1,"button",21),v.cc("click",function(){v.uc(e);const t=v.gc().$implicit;return v.gc().checkStatus(t)}),v.Qb(2,"i",22),v.Ub(),v.Vb(3,"button",23),v.cc("click",function(){v.uc(e);const t=v.gc().$implicit;return v.gc().delete(t.spr_ID)}),v.Qb(4,"i",24),v.Ub(),v.Ub()}}function ee(e,t){if(1&e){const e=v.Wb();v.Vb(0,"td",20),v.Vb(1,"button",21),v.cc("click",function(){v.uc(e);const t=v.gc().$implicit;return v.gc().checkStatus(t)}),v.Qb(2,"i",22),v.Ub(),v.Vb(3,"button",25),v.Qb(4,"i",24),v.Ub(),v.Ub()}}function te(e,t){if(1&e&&(v.Vb(0,"tbody"),v.Vb(1,"td"),v.Dc(2),v.Ub(),v.Vb(3,"td"),v.Dc(4),v.Ub(),v.Vb(5,"td"),v.Dc(6),v.Ub(),v.Vb(7,"td"),v.Dc(8),v.Ub(),v.Vb(9,"td"),v.Dc(10),v.Ub(),v.Vb(11,"td"),v.Dc(12),v.Ub(),v.Vb(13,"td"),v.Bc(14,G,2,0,"span",14),v.Bc(15,Z,2,0,"span",15),v.Ub(),v.Bc(16,X,2,1,"td",16),v.Bc(17,Y,1,0,"td",16),v.Bc(18,K,5,0,"td",17),v.Bc(19,ee,5,0,"td",17),v.Ub()),2&e){const e=t.$implicit,n=t.index;v.Db(2),v.Ec(n+1),v.Db(2),v.Ec(e.referrerName),v.Db(2),v.Ec(e.referrerPhone),v.Db(2),v.Ec(e.referrerDescription),v.Db(2),v.Ec(e.fullName),v.Db(2),v.Ec(e.phoneNumber),v.Db(2),v.lc("ngIf","PENDING"==e.status),v.Db(1),v.lc("ngIf","PROCESSING"==e.status),v.Db(1),v.lc("ngIf",null!=e.collaborator),v.Db(1),v.lc("ngIf",null==e.collaborator),v.Db(1),v.lc("ngIf","PENDING"==e.status),v.Db(1),v.lc("ngIf","PROCESSING"==e.status)}}function ne(e,t){if(1&e&&(v.Vb(0,"mat-option",26),v.Dc(1),v.Ub()),2&e){const e=t.$implicit;v.lc("value",e.id),v.Db(1),v.Ec(e.value)}}const ie=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.SupportedPeopleRecommendService=e,this.ProjectService=t,this.notificationService=n,this.dialog=i,this.maxSize=5,this.currentPage=1,this.options=[{id:1,value:5},{id:2,value:10},{id:3,value:25},{id:4,value:100}],this.selected1=this.options[0].id,this.checkStatus=e=>Object(b.b)(this,void 0,void 0,function*(){try{const t=yield(yield this.SupportedPeopleRecommendService.checkStatus(e.spr_ID,0)).data;t&&(0==t.errorCode?(this.prepareData(t.data),this.openHandleDialog(this.SupportedPeopleRecommend)):this.notificationService.success(t.message),this.getList(this.currentPage,this.itemsPerPage))}catch(t){console.log(t)}}),this.createProject=e=>Object(b.b)(this,void 0,void 0,function*(){try{const t=yield(yield this.SupportedPeopleRecommendService.createProject(e)).data;t&&(this.notificationService.success(t.message),this.getList(this.currentPage,this.itemsPerPage))}catch(t){console.log(t)}}),this.delete=e=>Object(b.b)(this,void 0,void 0,function*(){try{if(confirm("B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n xo\xe1 ho\xe0n c\u1ea3nh?")){const t=yield(yield this.SupportedPeopleRecommendService.delete(e)).data;t&&(this.notificationService.warn(t.message),this.getList(this.currentPage,this.itemsPerPage))}}catch(t){console.log(t)}})}pageChanged(e){this.currentPage=e.page,this.getList(this.currentPage,this.itemsPerPage)}rowsChanged(e){this.itemsPerPage=this.options[e.value-1].value,this.getList(this.currentPage,this.itemsPerPage)}ngOnInit(){this.itemsPerPage=5,this.countAll(),this.getList(1,this.itemsPerPage)}countAll(){return Object(b.b)(this,void 0,void 0,function*(){this.totalItems=yield(yield this.SupportedPeopleRecommendService.countAll()).data})}getList(e,t){return Object(b.b)(this,void 0,void 0,function*(){this.SupportedPeopleRecommends=yield(yield this.SupportedPeopleRecommendService.getFromAtoB(e,t)).data})}prepareData(e){this.SupportedPeopleRecommend={spd_ID:e.spd_ID,sprID:e.sprID,referrerName:e.referrerName,referrerPhone:e.referrerPhone,referrerDescription:e.referrerDescription,fullName:e.fullName,address:e.address,phoneNumber:e.phoneNumber,bankName:e.bankName,bankAccount:e.bankAccount,projectName:e.projectName,briefDescription:e.briefDescription,description:e.description,imageUrl:e.imageUrl,videoUrl:e.videoUrl,startDate:e.startDate,endDate:e.endDate,targetMoney:e.targetMoney,canDisburseWhenOverdue:e.canDisburseWhenOverdue,prt_ID:e.prt_ID,projectType:e.projectType,cti_ID:e.cti_ID,city:e.city,images:e.images,clb_ID:0}}openHandleDialog(e){this.dialog.open(J,{width:"500px",data:e}).afterClosed().subscribe(e=>{e&&this.openHandleStep2Dialog(e),this.getList(this.currentPage,this.itemsPerPage)})}openHandleStep2Dialog(e){this.dialog.open(E,{width:"800px",data:e}).afterClosed().subscribe(e=>{e&&("back"==e?this.openHandleDialog(this.SupportedPeopleRecommend):this.createProject(e))})}}return e.\u0275fac=function(t){return new(t||e)(v.Pb(U),v.Pb(u.a),v.Pb(g.a),v.Pb(p.b))},e.\u0275cmp=v.Jb({type:e,selectors:[["app-supported-people-recommend"]],decls:39,vars:11,consts:[[1,"col-lg"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col"],[1,"card-title"],[1,"card-body"],[1,"table","table-light"],[2,"width","100px","text-align","right"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"totalItems","ngModel","maxSize","boundaryLinks","rotate","itemsPerPage","ngModelChange","pageChanged"],["align","right","align","right"],[3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","badge badge-secondary",4,"ngIf"],["class","badge badge-info",4,"ngIf"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"badge","badge-secondary"],[1,"badge","badge-info"],[2,"text-align","right"],["type","button","tooltip","X\u1eed l\xfd ho\xe0n c\u1ea3nh ",1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-pencil"],["type","button","tooltip","Xo\xe1 ho\xe0n c\u1ea3nh ",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-trash-o"],["type","button","disabled","",1,"btn","btn-danger","btn-sm",2,"opacity","0.2"],[3,"value"]],template:function(e,t){1&e&&(v.Vb(0,"div",0),v.Vb(1,"div",1),v.Vb(2,"div",2),v.Vb(3,"div",3),v.Vb(4,"div",4),v.Vb(5,"h3",5),v.Dc(6," Ho\xe0n c\u1ea3nh kh\xe1c "),v.Ub(),v.Ub(),v.Ub(),v.Ub(),v.Vb(7,"div",6),v.Vb(8,"table",7),v.Vb(9,"thead"),v.Vb(10,"tr"),v.Vb(11,"th"),v.Dc(12,"#"),v.Ub(),v.Vb(13,"th"),v.Dc(14,"Ng\u01b0\u1eddi gi\u1edbi thi\u1ec7u"),v.Ub(),v.Vb(15,"th"),v.Dc(16,"S\u0110T li\xean l\u1ea1c"),v.Ub(),v.Vb(17,"th"),v.Dc(18,"M\xf4 t\u1ea3 ho\xe0n c\u1ea3nh"),v.Ub(),v.Vb(19,"th"),v.Dc(20,"T\xean ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng"),v.Ub(),v.Vb(21,"th"),v.Dc(22,"S\u0110T ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng"),v.Ub(),v.Vb(23,"th"),v.Dc(24,"Tr\u1ea1ng th\xe1i"),v.Ub(),v.Vb(25,"th"),v.Dc(26,"C\u1ed9ng t\xe1c vi\xean"),v.Ub(),v.Vb(27,"th",8),v.Dc(28,"T\xe1c v\u1ee5"),v.Ub(),v.Ub(),v.Ub(),v.Bc(29,te,20,12,"tbody",9),v.Qb(30,"tbody"),v.Ub(),v.Vb(31,"div",3),v.Vb(32,"div",4),v.Vb(33,"pagination",10),v.cc("ngModelChange",function(e){return t.currentPage=e})("pageChanged",function(e){return t.pageChanged(e)}),v.Ub(),v.Ub(),v.Vb(34,"mat-form-field",11),v.Vb(35,"mat-label"),v.Dc(36,"S\u1ed1 h\xe0ng hi\u1ec3n th\u1ecb"),v.Ub(),v.Vb(37,"mat-select",12),v.cc("selectionChange",function(e){return t.rowsChanged(e)})("ngModelChange",function(e){return t.selected1=e}),v.Bc(38,ne,2,2,"mat-option",13),v.Ub(),v.Ub(),v.Ub(),v.Ub(),v.Ub(),v.Ub()),2&e&&(v.Db(29),v.lc("ngForOf",t.SupportedPeopleRecommends),v.Db(4),v.lc("totalItems",t.totalItems)("ngModel",t.currentPage)("maxSize",t.maxSize)("boundaryLinks",!0)("rotate",!1)("itemsPerPage",t.itemsPerPage),v.Db(1),v.yc("width",80,"px"),v.Db(3),v.lc("ngModel",t.selected1),v.Db(1),v.lc("ngForOf",t.options))},directives:[i.j,a.a,o.i,o.k,y.b,y.e,I.a,i.k,d.a,x.m],encapsulation:2}),e})(),data:{title:"Ho\xe0n c\u1ea3nh kh\xe1c"}}];let ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v.Nb({type:e}),e.\u0275inj=v.Mb({imports:[[l.g.forChild(ie)],l.g]}),e})();var oe=n("j5wd");let ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v.Nb({type:e}),e.\u0275inj=v.Mb({imports:[[i.c,ae,a.b.forRoot(),o.e,oe.a,c.b,r.a.initializeApp(s.a.firebaseConfig,"cloud"),d.b.forRoot()]]}),e})()},klZy:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("H+bZ"),a=n("8Y7J");let o=(()=>{class e{constructor(){this.getProjects=()=>i.a.get(i.a.url.projects),this.countVerifiedProjects=()=>i.a.get(i.a.url.projects+"/count"),this.getVerifiedProjects=(e,t)=>i.a.get(`${i.a.url.projects}/page/${e}/size/${t}`),this.countUnverifiedProjects=()=>i.a.get(i.a.url.projects+"/unverified/count"),this.getUnverified=(e,t)=>i.a.get(`${i.a.url.projects}/unverified/page/${e}/size/${t}`),this.countClosedProjects=()=>i.a.get(i.a.url.projects+"/closed/count"),this.getClosed=(e,t)=>i.a.get(`${i.a.url.projects}/closed/page/${e}/size/${t}`),this.getAllActivating=()=>i.a.get(i.a.url.projects+"/activating"),this.countActivatingProjects=()=>i.a.get(i.a.url.projects+"/activating/count"),this.getActivatingProjects=(e,t)=>i.a.get(`${i.a.url.projects}/activating/page/${e}/size/${t}`),this.countReachedProjects=()=>i.a.get(i.a.url.projects+"/reached/count"),this.getReachedProjects=(e,t)=>i.a.get(`${i.a.url.projects}/reached/page/${e}/size/${t}`),this.countOverdueProjects=()=>i.a.get(i.a.url.projects+"/overdue/count"),this.getOverdueProjects=(e,t)=>i.a.get(`${i.a.url.projects}/overdue/page/${e}/size/${t}`),this.updateMoveMoneyProgress=()=>i.a.put(`${i.a.url.projects}/handle_all_money`),this.updateProjectStatus=()=>i.a.get(i.a.url.projects+"/update_donate_status"),this.createProject=(e,t)=>i.a.post(`${i.a.url.projects}/create/collaborator/${t}`,e),this.updateProject=e=>i.a.put(`${i.a.url.projects}/update`,e),this.updateAndApproveProject=e=>i.a.put(`${i.a.url.projects}/update_and_approve`,e),this.deleteProject=e=>i.a.delete(`${i.a.url.projects}/${e}`),this.approveProject=e=>i.a.put(`${i.a.url.projects}/approve/${e}`),this.closeProject=e=>i.a.put(`${i.a.url.projects}/close/${e}`),this.extendProject=(e,t)=>i.a.put(`${i.a.url.projects}/extend/${e}/num_of_date/${t}`),this.countTotalMoney=()=>i.a.get(i.a.url.projects+"/count_money"),this.disburseFund=()=>i.a.get(i.a.url.projects+"/disburse_fund")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);